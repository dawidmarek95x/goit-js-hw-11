{"mappings":"gkBAeA,MAAMA,EAAMC,GAAaC,SAASC,cAAcF,GAG1CG,EAAaJ,EAAG,gBAChBK,EAAcL,EAAG,uBACjBM,EAAiBN,EAAG,cACpBO,EAAUP,EAAG,YAEnB,IAAIQ,EACAC,EACAC,EACAC,EAyBJ,SAASC,KACP,EAAAC,EAAAC,aAAYT,EAAYU,MAAOP,GAC5BQ,MAAKC,KAOV,UAAsBC,KAACA,EAAIC,UAAEA,IAC3BT,EAAcS,EAEd,MAAMC,EAAUF,EAAKG,KAAI,EAACC,aAACA,EAAYC,cAAEA,EAAaC,KAAEA,EAAIC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,KAAe,uEAElEL,qCAAiDD,WAAsBE,uKAIzEC,kIAIAC,qIAIAC,sIAIAC,mDAKhCC,KAAK,IAENtB,EAAQuB,mBAAmB,YAAaV,GAEhB,iBAAbT,GACTA,EAASoB,UAGXpB,EAAW,IAAIqB,EAAAC,GAAJ,CAAmB,oBAE9BxB,GAAmBS,EAAKgB,YAyBtB5B,EAAe6B,MAAMC,QADnB1B,IAAgBD,EACa,OAEA,SAxBT,IAApBA,EACFuB,EAAAK,GAASC,OAAOC,QAAQ,4EACf9B,EAAkB,GAAKA,IAAoBC,EACpDsB,EAAAK,GAASC,OAAOE,KAAK,8DACZ/B,EAAkB,GAAoB,IAAfD,GAChCwB,EAAAK,GAASC,OAAOG,QAAQ,oBAAoB/B,aAG9C,GAAIF,EAAa,EAAG,CAClB,MAAQkC,OAAQC,GAAezC,SAC9BC,cAAc,2BAA2ByC,wBAE1CC,OAAOC,SAAS,CACdC,IAAkB,EAAbJ,EACLK,SAAU,YA3DVC,CAAahC,MAEdiC,OAAMC,GAASC,QAAQC,IAAIF,KA3BhC/C,EAAWkD,iBAAiB,UAM5B,SAAmBC,GACjBA,EAAEC,iBACFlD,EAAe6B,MAAMC,QAAU,OAC/B5B,EAAa,EACbC,EAAkB,EAClBG,IACAL,EAAQkD,UAAY,MATtBnD,EAAegD,iBAAiB,SAahC,WACE9C,GAAc,EACdI","sources":["src/js/01-load-more.js"],"sourcesContent":["// Import of styles\nimport '../sass/01-main.scss';\n\n// Import the function that executes the query to the server for the searched images\nimport { fetchImages } from './fetchImages';\n\n// Import of Notiflix library\nimport Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.5.min.css';\n\n// Import of simpleLightbox library\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// Optimizing function (shortening the record) for searching for elements on the page\nconst qs = (selector) => document.querySelector(selector);\n\n// Search for input and output elements\nconst searchForm = qs(\".search-form\");\nconst searchInput = qs(\".search-form__input\");\nconst loadMoreImgBtn = qs(\".load-more\");\nconst gallery = qs(\".gallery\");\n\nlet pageNumber;\nlet displayedImages;\nlet totalOfHits;\nlet lightbox;\n\n// Call the new search function after submitting the form\nsearchForm.addEventListener(\"submit\", newSearch);\n\n// Calling up the function of loading additional images after clicking on the \"LOAD MORE\" button\nloadMoreImgBtn.addEventListener(\"click\", loadMoreImg);\n\n// Function finding new query results taking into account the value given in the input field\nfunction newSearch(e) {\n  e.preventDefault();\n  loadMoreImgBtn.style.display = \"none\"\n  pageNumber = 1;\n  displayedImages = 0;\n  searchingImages();\n  gallery.innerHTML = \"\";\n}\n\n// Definition of the function for loading more new images\nfunction loadMoreImg() {\n  pageNumber += 1;\n  searchingImages();\n}\n\n// Definition of the image search function contained in the backend\nfunction searchingImages() {\n  fetchImages(searchInput.value, pageNumber)\n    .then(images => {\n      renderImages(images);\n    })\n    .catch(error => console.log(error));\n}\n\n// Definition of the images rendering function based on the data taken from the backend\nfunction renderImages({hits, totalHits}) {\n  totalOfHits = totalHits;\n\n  const markups = hits.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `\n  <div class=\"gallery__item\">\n    <a class=\"gallery__link\" href=\"${largeImageURL}\"><img class=\"gallery__img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /></a>\n    <div class=\"gallery__info\">\n      <p class=\"info__item\">\n        <b class=\"info__label\">Likes</b>\n        <span class=\"info__data\">${likes}</span>\n      </p>\n      <p class=\"info__item\">\n        <b class=\"info__label\">Views</b>\n        <span class=\"info__data\">${views}</span>\n      </p>\n      <p class=\"info__item\">\n        <b class=\"info__label\">Comments</b>\n        <span class=\"info__data\">${comments}</span>\n      </p>\n      <p class=\"info__item\">\n        <b class=\"info__label\">Downloads</b>\n        <span class=\"info__data\">${downloads}</span>\n      </p>\n    </div>\n  </div>\n  `)\n  .join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markups);\n\n  if (typeof lightbox === \"object\") {\n    lightbox.destroy();\n  }\n\n  lightbox = new SimpleLightbox(\".gallery__item a\");\n\n  displayedImages += hits.length;\n  checkingForImagesLeft();\n\n  if (displayedImages === 0) {\n    Notiflix.Notify.failure(\"Sorry, there are no images matching your search query. Please try again.\");\n  } else if (displayedImages > 0 && displayedImages === totalOfHits) {\n    Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\");\n  } else if (displayedImages > 0 && pageNumber === 1) {\n    Notiflix.Notify.success(`Hooray! We found ${totalOfHits} images.`);\n  }\n\n  if (pageNumber > 1) {\n    const { height: cardHeight } = document\n    .querySelector('.gallery .gallery__item').getBoundingClientRect();\n  \n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\n// Definition of the function to hide the \"LOAD MORE\" button when there are no more images to be loaded\nfunction checkingForImagesLeft() {\n  if (totalOfHits === displayedImages) {\n    loadMoreImgBtn.style.display = \"none\";\n  } else {\n    loadMoreImgBtn.style.display = \"block\";\n  }\n}"],"names":["$1280f960daaf59c1$var$qs","selector","document","querySelector","$1280f960daaf59c1$var$searchForm","$1280f960daaf59c1$var$searchInput","$1280f960daaf59c1$var$loadMoreImgBtn","$1280f960daaf59c1$var$gallery","$1280f960daaf59c1$var$pageNumber","$1280f960daaf59c1$var$displayedImages","$1280f960daaf59c1$var$totalOfHits","$1280f960daaf59c1$var$lightbox","$1280f960daaf59c1$var$searchingImages","$ak5AJ","fetchImages","value","then","images","hits","totalHits","markups","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","destroy","$parcel$interopDefault","$fZKcF","length","style","display","$eWCmQ","Notify","failure","info","success","height","cardHeight","getBoundingClientRect","window","scrollBy","top","behavior","$1280f960daaf59c1$var$renderImages","catch","error","console","log","addEventListener","e","preventDefault","innerHTML"],"version":3,"file":"01-load-more.3189ad97.js.map"}